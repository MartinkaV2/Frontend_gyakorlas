<!-- src/app/image-uploader/image-uploader.html -->
<div class="uploader">
  <h3>Kép feltöltése</h3>

  <label class="file-label">
    <input type="file" (change)="onFileSelected($event)" accept="image/*" />
    <span class="choose">Fájl választása</span>
  </label>

  <div class="actions">
    <button class="btn" (click)="uploadImage()" [disabled]="!selectedFile || uploading">
      {{ uploading ? 'Feltöltés...' : 'Feltöltés' }}
    </button>
    <button class="btn secondary" (click)="onShare()" [disabled]="!uploadedImageUrl || sharing || uploading">
      Megosztás
    </button>
  </div>

  <div class="preview" *ngIf="selectedPreview">
    <p>Előnézet:</p>
    <img [src]="selectedPreview" alt="preview" />
  </div>

  <div class="uploaded" *ngIf="uploadedImageUrl">
    <p>Feltöltve — előnézet az imgbb-ről:</p>
    <img [src]="uploadedImageUrl" alt="uploaded" />
  </div>

  <!-- animált kis panel: látszik, ha sharingDelayPanel true -->
  <div class="share-panel" *ngIf="sharePanelVisible">
    <div class="panel-inner">
      <p>Másold ki a linket, hogy megoszd:</p>
      <div class="link-row">
        <input class="share-input" [value]="uploadedImageUrl" readonly #shareInput />
        <button class="copy-btn" (click)="copyLink(shareInput.value)">{{copyButtonText}}</button>
      </div>
      <p class="hint">A linket megnyitva a megosztott képet látják.</p>
    </div>
  </div>

  <div class="toast" *ngIf="toastMessage">{{ toastMessage }}</div>
</div>
