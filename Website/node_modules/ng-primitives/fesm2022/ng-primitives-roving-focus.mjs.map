{"version":3,"file":"ng-primitives-roving-focus.mjs","sources":["../../../../packages/ng-primitives/roving-focus/src/roving-focus-group/roving-focus-group-state.ts","../../../../packages/ng-primitives/roving-focus/src/roving-focus-group/roving-focus-group-token.ts","../../../../packages/ng-primitives/roving-focus/src/roving-focus-group/roving-focus-group.ts","../../../../packages/ng-primitives/roving-focus/src/roving-focus-item/roving-focus-item.ts","../../../../packages/ng-primitives/roving-focus/src/ng-primitives-roving-focus.ts"],"sourcesContent":["import {\n  createState,\n  createStateInjector,\n  createStateProvider,\n  createStateToken,\n} from 'ng-primitives/state';\nimport type { NgpRovingFocusGroup } from './roving-focus-group';\n\n/**\n * The state token  for the RovingFocusGroup primitive.\n */\nexport const NgpRovingFocusGroupStateToken =\n  createStateToken<NgpRovingFocusGroup>('RovingFocusGroup');\n\n/**\n * Provides the RovingFocusGroup state.\n */\nexport const provideRovingFocusGroupState = createStateProvider(NgpRovingFocusGroupStateToken);\n\n/**\n * Injects the RovingFocusGroup state.\n */\nexport const injectRovingFocusGroupState = createStateInjector<NgpRovingFocusGroup>(\n  NgpRovingFocusGroupStateToken,\n);\n\n/**\n * The RovingFocusGroup state registration function.\n */\nexport const rovingFocusGroupState = createState(NgpRovingFocusGroupStateToken);\n","import { FactoryProvider, InjectionToken, Type, inject } from '@angular/core';\nimport { NgpRovingFocusGroup } from './roving-focus-group';\n\nexport const NgpRovingFocusGroupToken = new InjectionToken<NgpRovingFocusGroup>(\n  'NgpRovingFocusGroupToken',\n);\n\n/**\n * Inject the RovingFocusGroup directive instance\n * @returns The RovingFocusGroup directive instance\n */\nexport function injectRovingFocusGroup(): NgpRovingFocusGroup {\n  return inject(NgpRovingFocusGroupToken);\n}\n\nexport interface NgpRovingFocusGroupOptions {\n  /**\n   * Whether we should inherit the focus group from the parent\n   * @default true\n   */\n  inherit?: boolean;\n}\n\n/**\n * Provide the RovingFocusGroup directive instance\n * @param type The RovingFocusGroup directive type\n * @returns The RovingFocusGroup token\n */\nexport function provideRovingFocusGroup(\n  type: Type<NgpRovingFocusGroup>,\n  { inherit = true }: NgpRovingFocusGroupOptions = {},\n): FactoryProvider {\n  return {\n    provide: NgpRovingFocusGroupToken,\n    // Roving focus groups may be nested, in this case, the parent group should be used\n    useFactory: () => {\n      if (!inherit) {\n        return inject(type, { self: true });\n      }\n\n      // If the parent group is not found, return the current group\n      // This is useful for nested groups\n      return (\n        inject(NgpRovingFocusGroupToken, { skipSelf: true, optional: true }) ??\n        inject(type, { self: true })\n      );\n    },\n  };\n}\n","import { FocusOrigin } from '@angular/cdk/a11y';\nimport { Directionality } from '@angular/cdk/bidi';\nimport { BooleanInput } from '@angular/cdk/coercion';\nimport { booleanAttribute, Directive, inject, input, signal } from '@angular/core';\nimport { NgpOrientation } from 'ng-primitives/common';\nimport { NgpRovingFocusItem } from '../roving-focus-item/roving-focus-item';\nimport { provideRovingFocusGroupState, rovingFocusGroupState } from './roving-focus-group-state';\nimport { provideRovingFocusGroup } from './roving-focus-group-token';\n\n/**\n * Apply the `ngpRovingFocusGroup` directive to an element to manage focus for a group of child elements.\n */\n@Directive({\n  selector: '[ngpRovingFocusGroup]',\n  exportAs: 'ngpRovingFocusGroup',\n  providers: [provideRovingFocusGroup(NgpRovingFocusGroup), provideRovingFocusGroupState()],\n})\nexport class NgpRovingFocusGroup {\n  /**\n   * Access the directionality service.\n   */\n  private readonly directionality = inject(Directionality);\n\n  /**\n   * Determine the orientation of the roving focus group.\n   * @default 'vertical'\n   */\n  readonly orientation = input<NgpOrientation>('vertical', {\n    alias: 'ngpRovingFocusGroupOrientation',\n  });\n\n  /**\n   * Determine if focus should wrap when the end or beginning is reached.\n   */\n  readonly wrap = input<boolean, BooleanInput>(true, {\n    alias: 'ngpRovingFocusGroupWrap',\n    transform: booleanAttribute,\n  });\n\n  /**\n   * Determine if the home and end keys should navigate to the first and last items.\n   */\n  readonly homeEnd = input<boolean, BooleanInput>(true, {\n    alias: 'ngpRovingFocusGroupHomeEnd',\n    transform: booleanAttribute,\n  });\n\n  /**\n   * Determine if the roving focus group is disabled.\n   */\n  readonly disabled = input<boolean, BooleanInput>(false, {\n    alias: 'ngpRovingFocusGroupDisabled',\n    transform: booleanAttribute,\n  });\n\n  /**\n   * Store the items in the roving focus group.\n   */\n  private readonly items = signal<NgpRovingFocusItem[]>([]);\n\n  /**\n   * Get the items in the roving focus group sorted by order.\n   */\n  private get sortedItems() {\n    return this.items().sort((a, b) => {\n      // sort the items by their position in the document\n      return a.elementRef.nativeElement.compareDocumentPosition(b.elementRef.nativeElement) &\n        Node.DOCUMENT_POSITION_FOLLOWING\n        ? -1\n        : 1;\n    });\n  }\n\n  /**\n   * Store the active item in the roving focus group.\n   * @internal\n   */\n  readonly activeItem = signal<NgpRovingFocusItem | null>(null);\n\n  /**\n   * The state of the roving focus group.\n   */\n  readonly state = rovingFocusGroupState<NgpRovingFocusGroup>(this);\n\n  /**\n   * Register an item with the roving focus group.\n   * @param item The item to register\n   * @internal\n   */\n  register(item: NgpRovingFocusItem): void {\n    this.items.update(items => [...items, item]);\n\n    // if there is no active item, make the first item the tabbable item\n    if (!this.activeItem()) {\n      this.activeItem.set(item);\n    }\n  }\n\n  /**\n   * Unregister an item with the roving focus group.\n   * @param item The item to unregister\n   * @internal\n   */\n  unregister(item: NgpRovingFocusItem): void {\n    this.items.update(items => items.filter(i => i !== item));\n\n    // check if the unregistered item is the active item\n    if (this.activeItem() === item) {\n      // if the active item is unregistered, activate the first item\n      this.activeItem.set(this.items()[0] ?? null);\n    }\n  }\n\n  /**\n   * Activate an item in the roving focus group.\n   * @param item The item to activate\n   * @param origin The origin of the focus change\n   */\n  setActiveItem(item: NgpRovingFocusItem | null, origin: FocusOrigin = 'program'): void {\n    this.activeItem.set(item);\n    item?.focus(origin);\n  }\n\n  /**\n   * Activate the first item in the roving focus group.\n   * @param origin The origin of the focus change\n   */\n  private activateFirstItem(origin: FocusOrigin): void {\n    // find the first item that is not disabled\n    const item = this.sortedItems.find(i => !i.disabled()) ?? null;\n\n    // set the first item as the active item\n    this.setActiveItem(item, origin);\n  }\n\n  /**\n   * Activate the last item in the roving focus group.\n   * @param origin The origin of the focus change\n   */\n  private activateLastItem(origin: FocusOrigin): void {\n    // find the last item that is not disabled\n    const item = [...this.sortedItems].reverse().find(i => !i.disabled()) ?? null;\n\n    // set the last item as the active item\n    this.setActiveItem(item, origin);\n  }\n\n  /**\n   * Activate the next item in the roving focus group.\n   * @param origin The origin of the focus change\n   */\n  private activateNextItem(origin: FocusOrigin): void {\n    const activeItem = this.activeItem();\n\n    // if there is no active item, activate the first item\n    if (!activeItem) {\n      this.activateFirstItem(origin);\n      return;\n    }\n\n    // find the index of the active item\n    const index = this.sortedItems.indexOf(activeItem);\n\n    // find the next item that is not disabled\n    const item = this.sortedItems.slice(index + 1).find(i => !i.disabled()) ?? null;\n\n    // if we are at the end of the list, wrap to the beginning\n    if (!item && this.state.wrap()) {\n      this.activateFirstItem(origin);\n      return;\n    }\n\n    // if there is no next item, do nothing\n    if (!item) {\n      return;\n    }\n\n    // set the next item as the active item\n    this.setActiveItem(item, origin);\n  }\n\n  /**\n   * Activate the previous item in the roving focus group.\n   * @param origin The origin of the focus change\n   */\n  private activatePreviousItem(origin: FocusOrigin): void {\n    const activeItem = this.activeItem();\n\n    // if there is no active item, activate the last item\n    if (!activeItem) {\n      this.activateLastItem(origin);\n      return;\n    }\n\n    // find the index of the active item\n    const index = this.sortedItems.indexOf(activeItem);\n\n    // find the previous item that is not disabled\n    const item =\n      this.sortedItems\n        .slice(0, index)\n        .reverse()\n        .find(i => !i.disabled()) ?? null;\n\n    // if we are at the beginning of the list, wrap to the end\n    if (!item && this.state.wrap()) {\n      this.activateLastItem(origin);\n      return;\n    }\n\n    // if there is no previous item, do nothing\n    if (!item) {\n      return;\n    }\n\n    // set the previous item as the active item\n    this.setActiveItem(item, origin);\n  }\n\n  /**\n   * Handle keyboard navigation for the roving focus group.\n   * @param event The keyboard event\n   * @internal\n   */\n  onKeydown(event: KeyboardEvent): void {\n    if (this.state.disabled()) {\n      return;\n    }\n\n    switch (event.key) {\n      case 'ArrowUp':\n        if (this.state.orientation() === 'vertical') {\n          event.preventDefault();\n          this.activatePreviousItem('keyboard');\n        }\n        break;\n      case 'ArrowDown':\n        if (this.state.orientation() === 'vertical') {\n          event.preventDefault();\n          this.activateNextItem('keyboard');\n        }\n        break;\n      case 'ArrowLeft':\n        if (this.state.orientation() === 'horizontal') {\n          event.preventDefault();\n\n          if (this.directionality.value === 'ltr') {\n            this.activatePreviousItem('keyboard');\n          } else {\n            this.activateNextItem('keyboard');\n          }\n        }\n        break;\n      case 'ArrowRight':\n        if (this.state.orientation() === 'horizontal') {\n          event.preventDefault();\n\n          if (this.directionality.value === 'ltr') {\n            this.activateNextItem('keyboard');\n          } else {\n            this.activatePreviousItem('keyboard');\n          }\n        }\n        break;\n      case 'Home':\n        if (this.state.homeEnd()) {\n          event.preventDefault();\n          this.activateFirstItem('keyboard');\n        }\n        break;\n      case 'End':\n        if (this.state.homeEnd()) {\n          event.preventDefault();\n          this.activateLastItem('keyboard');\n        }\n        break;\n    }\n  }\n}\n","import { FocusMonitor, FocusOrigin } from '@angular/cdk/a11y';\nimport { BooleanInput } from '@angular/cdk/coercion';\nimport {\n  Directive,\n  ElementRef,\n  HostListener,\n  OnDestroy,\n  OnInit,\n  booleanAttribute,\n  computed,\n  inject,\n  input,\n} from '@angular/core';\nimport { injectRovingFocusGroup } from '../roving-focus-group/roving-focus-group-token';\n\n/**\n * Apply the `ngpRovingFocusItem` directive to an element within a roving focus group to automatically manage focus.\n */\n@Directive({\n  selector: '[ngpRovingFocusItem]',\n  exportAs: 'ngpRovingFocusItem',\n  host: {\n    '[attr.tabindex]': 'tabindex()',\n  },\n})\nexport class NgpRovingFocusItem implements OnInit, OnDestroy {\n  /**\n   * Access the group the roving focus item belongs to.\n   */\n  private readonly group = injectRovingFocusGroup();\n\n  /**\n   * Access the focus monitor service.\n   */\n  private readonly focusMonitor = inject(FocusMonitor);\n\n  /**\n   * Access the element the roving focus item is attached to.\n   */\n  readonly elementRef = inject<ElementRef<HTMLElement>>(ElementRef);\n\n  /**\n   * Define if the item is disabled.\n   */\n  readonly disabled = input<boolean, BooleanInput>(false, {\n    alias: 'ngpRovingFocusItemDisabled',\n    transform: booleanAttribute,\n  });\n\n  /**\n   * Derive the tabindex of the roving focus item.\n   */\n  readonly tabindex = computed(() =>\n    !this.group.disabled() && this.group.activeItem() === this ? 0 : -1,\n  );\n\n  /**\n   * Initialize the roving focus item.\n   */\n  ngOnInit(): void {\n    this.group.register(this);\n  }\n\n  /**\n   * Clean up the roving focus item.\n   */\n  ngOnDestroy(): void {\n    this.group.unregister(this);\n  }\n\n  /**\n   * Forward the keydown event to the roving focus group.\n   * @param event The keyboard event\n   */\n  @HostListener('keydown', ['$event'])\n  protected onKeydown(event: KeyboardEvent): void {\n    if (this.disabled()) {\n      return;\n    }\n\n    this.group.onKeydown(event);\n  }\n\n  /**\n   * Activate the roving focus item on click.\n   */\n  @HostListener('click')\n  protected activate(): void {\n    if (this.disabled()) {\n      return;\n    }\n\n    this.group.setActiveItem(this, 'mouse');\n  }\n\n  /**\n   * Focus the roving focus item.\n   * @param origin The origin of the focus\n   */\n  focus(origin: FocusOrigin): void {\n    this.focusMonitor.focusVia(this.elementRef, origin);\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}