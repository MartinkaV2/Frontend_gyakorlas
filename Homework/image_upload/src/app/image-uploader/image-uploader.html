<div class="uploader">
  <h3>K√©p felt√∂lt√©se</h3>

  <label class="file-label">
    <input type="file" (change)="onFileSelected($event)" accept="image/*" />
    <span class="choose">F√°jl v√°laszt√°sa</span>
  </label>

  <div class="actions">
    <button class="btn" (click)="uploadImage()" [disabled]="!selectedFile || uploading">
      {{ uploading ? 'Felt√∂lt√©s...' : 'Felt√∂lt√©s' }}
    </button>
    <button class="btn secondary" (click)="onShare()" [disabled]="!uploadedImageUrl || uploading">
      {{ sharing ? 'Megoszt√°s...' : 'Megoszt√°s' }}
    </button>
  </div>

  <!-- El≈ën√©zet -->
  <div class="preview" *ngIf="selectedPreview && !uploadedImageUrl">
    <p>Kiv√°lasztott k√©p el≈ën√©zete:</p>
    <img [src]="selectedPreview" alt="El≈ën√©zet" />
  </div>

  <!-- Felt√∂lt√∂tt k√©p -->
  <div class="uploaded" *ngIf="uploadedImageUrl">
    <p>Sikeresen felt√∂ltve!</p>
    <img [src]="uploadedImageUrl" alt="Felt√∂lt√∂tt k√©p" />
    
    <!-- K√∂zvetlen k√©p link -->
    <div class="link-section">
      <p class="link-title">üì∑ K√∂zvetlen k√©p link:</p>
      <div class="link-row">
        <input class="share-input" [value]="uploadedImageUrl" readonly #imageInput />
        <button class="copy-btn" (click)="copyLink(imageInput.value)">{{copyButtonText}}</button>
      </div>
    </div>

    <!-- K√©p oldal link -->
    <div class="link-section" *ngIf="uploadedImagePageUrl">
      <p class="link-title">üåê K√©p megtekint√©se imgBB-n:</p>
      <div class="link-row">
        <input class="share-input" [value]="uploadedImagePageUrl" readonly #pageInput />
        <button class="copy-btn secondary" (click)="copyPageLink(pageInput.value)">{{copyPageButtonText}}</button>
      </div>
      <button class="open-btn" (click)="openImagePage()">
        üîó Megnyit√°s √∫j lapon
      </button>
    </div>

    <!-- Hib√°s API v√°lasz eset√©n -->
    <div class="link-section" *ngIf="!uploadedImagePageUrl && uploadedImageUrl">
      <p class="link-title">‚ö†Ô∏è Csak k√∂zvetlen k√©p link √©rhet≈ë el:</p>
      <div class="link-row">
        <input class="share-input" [value]="uploadedImageUrl" readonly #fallbackInput />
        <button class="copy-btn" (click)="copyLink(fallbackInput.value)">{{copyButtonText}}</button>
      </div>
    </div>
  </div>

  <!-- Megoszt√°si panel -->
  <div class="share-panel" *ngIf="sharePanelVisible">
    <div class="panel-inner">
      <p>üìã M√°sold ki a linket, hogy megoszd:</p>
      <div class="link-row">
        <input class="share-input" [value]="uploadedImageUrl" readonly #shareInput />
        <button class="copy-btn" (click)="copyLink(shareInput.value)">{{copyButtonText}}</button>
      </div>
      <p class="hint">A linket megnyitva b√°rki l√°thatja a felt√∂lt√∂tt k√©pet</p>
    </div>
  </div>

  <!-- √ârtes√≠t√©s -->
  <div class="toast" *ngIf="toastMessage">{{ toastMessage }}</div>
</div>