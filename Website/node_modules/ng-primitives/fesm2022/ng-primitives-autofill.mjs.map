{"version":3,"file":"ng-primitives-autofill.mjs","sources":["../../../../packages/ng-primitives/autofill/src/autofill/autofill.ts","../../../../packages/ng-primitives/autofill/src/ng-primitives-autofill.ts"],"sourcesContent":["import { Directive, HostListener, output, signal } from '@angular/core';\nimport { injectStyleInjector } from 'ng-primitives/internal';\n\n@Directive({\n  selector: '[ngpAutofill]',\n  exportAs: 'ngpAutofill',\n  host: {\n    '[attr.data-autofill]': 'autofilled() ? \"\" : null',\n  },\n})\nexport class NgpAutofill {\n  /**\n   * Access the style injector.\n   */\n  private readonly styleInjector = injectStyleInjector();\n\n  /**\n   * Store the autofill state.\n   */\n  protected readonly autofilled = signal(false);\n\n  /**\n   * Emit when the autofill state changes.\n   */\n  readonly autofillChange = output<boolean>({\n    alias: 'ngpAutofill',\n  });\n\n  constructor() {\n    // This technique is based on that used by the Angular CDK\n    // https://github.com/angular/components/blob/main/src/cdk/text-field/_index.scss\n    this.styleInjector.add(\n      'ngp-autofill',\n      `\n        @keyframes ngp-autofill-start { }\n        @keyframes ngp-autofill-end {}\n\n        [data-autofill]:-webkit-autofill {\n          animation: ngp-autofill-start 0s 1ms;\n        }\n\n        [data-autofill]:not(:-webkit-autofill) {\n          animation: ngp-autofill-end 0s 1ms;\n        }\n      `,\n    );\n  }\n\n  @HostListener('animationstart', ['$event'])\n  protected onAnimationStart(event: AnimationEvent): void {\n    if (event.animationName === 'ngp-autofill-start') {\n      this.autofilled.set(true);\n      this.autofillChange.emit(true);\n    }\n\n    if (event.animationName === 'ngp-autofill-end') {\n      this.autofilled.set(false);\n      this.autofillChange.emit(false);\n    }\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;MAUa,WAAW,CAAA;AAkBtB,IAAA,WAAA,GAAA;AAjBA;;AAEG;QACc,IAAA,CAAA,aAAa,GAAG,mBAAmB,EAAE;AAEtD;;AAEG;AACgB,QAAA,IAAA,CAAA,UAAU,GAAG,MAAM,CAAC,KAAK,CAAC;AAE7C;;AAEG;QACM,IAAA,CAAA,cAAc,GAAG,MAAM,CAAU;AACxC,YAAA,KAAK,EAAE,aAAa;AACrB,SAAA,CAAC;;;AAKA,QAAA,IAAI,CAAC,aAAa,CAAC,GAAG,CACpB,cAAc,EACd;;;;;;;;;;;AAWC,MAAA,CAAA,CACF;IACH;AAGU,IAAA,gBAAgB,CAAC,KAAqB,EAAA;AAC9C,QAAA,IAAI,KAAK,CAAC,aAAa,KAAK,oBAAoB,EAAE;AAChD,YAAA,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC;AACzB,YAAA,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC;QAChC;AAEA,QAAA,IAAI,KAAK,CAAC,aAAa,KAAK,kBAAkB,EAAE;AAC9C,YAAA,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC;AAC1B,YAAA,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC;QACjC;IACF;+GAjDW,WAAW,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;mGAAX,WAAW,EAAA,YAAA,EAAA,IAAA,EAAA,QAAA,EAAA,eAAA,EAAA,OAAA,EAAA,EAAA,cAAA,EAAA,aAAA,EAAA,EAAA,IAAA,EAAA,EAAA,SAAA,EAAA,EAAA,gBAAA,EAAA,0BAAA,EAAA,EAAA,UAAA,EAAA,EAAA,oBAAA,EAAA,4BAAA,EAAA,EAAA,EAAA,QAAA,EAAA,CAAA,aAAA,CAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA;;4FAAX,WAAW,EAAA,UAAA,EAAA,CAAA;kBAPvB,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACT,oBAAA,QAAQ,EAAE,eAAe;AACzB,oBAAA,QAAQ,EAAE,aAAa;AACvB,oBAAA,IAAI,EAAE;AACJ,wBAAA,sBAAsB,EAAE,0BAA0B;AACnD,qBAAA;AACF,iBAAA;wDAwCW,gBAAgB,EAAA,CAAA;sBADzB,YAAY;uBAAC,gBAAgB,EAAE,CAAC,QAAQ,CAAC;;;AChD5C;;AAEG;;;;"}