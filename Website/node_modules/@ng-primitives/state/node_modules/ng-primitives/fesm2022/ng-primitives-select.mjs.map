{"version":3,"file":"ng-primitives-select.mjs","sources":["../../../../packages/ng-primitives/select/src/native-select/native-select-state.ts","../../../../packages/ng-primitives/select/src/native-select/native-select.ts","../../../../packages/ng-primitives/select/src/select/select-state.ts","../../../../packages/ng-primitives/select/src/select-dropdown/select-dropdown.ts","../../../../packages/ng-primitives/select/src/select-option/select-option.ts","../../../../packages/ng-primitives/select/src/select-portal/select-portal.ts","../../../../packages/ng-primitives/select/src/config/select-config.ts","../../../../packages/ng-primitives/select/src/select/select.ts","../../../../packages/ng-primitives/select/src/ng-primitives-select.ts"],"sourcesContent":["import {\n  createState,\n  createStateInjector,\n  createStateProvider,\n  createStateToken,\n} from 'ng-primitives/state';\nimport type { NgpNativeSelect } from './native-select';\n\n/**\n * The state token for the Select primitive.\n */\nexport const NgpNativeSelectStateToken = createStateToken<NgpNativeSelect>('Select');\n\n/**\n * Provides the Select state.\n */\nexport const provideNativeSelectState = createStateProvider(NgpNativeSelectStateToken);\n\n/**\n * Injects the Select state.\n */\nexport const injectNativeSelectState =\n  createStateInjector<NgpNativeSelect>(NgpNativeSelectStateToken);\n\n/**\n * The Select state registration function.\n */\nexport const selectNativeSelectState = createState(NgpNativeSelectStateToken);\n","import { BooleanInput } from '@angular/cdk/coercion';\nimport { booleanAttribute, Directive, input } from '@angular/core';\nimport { setupFormControl } from 'ng-primitives/form-field';\nimport { setupInteractions } from 'ng-primitives/interactions';\nimport { uniqueId } from 'ng-primitives/utils';\nimport { provideNativeSelectState, selectNativeSelectState } from './native-select-state';\n\n/**\n * Apply the `ngpNativeSelect` directive to a select element that you want to enhance.\n */\n@Directive({\n  selector: 'select[ngpNativeSelect]',\n  exportAs: 'ngpNativeSelect',\n  providers: [provideNativeSelectState()],\n  host: {\n    '[attr.disabled]': 'state.disabled() || null',\n  },\n})\nexport class NgpNativeSelect {\n  /**\n   * The id of the select. If not provided, a unique id will be generated.\n   */\n  readonly id = input<string>(uniqueId('ngp-native-select'));\n\n  /**\n   * Whether the select is disabled.\n   */\n  readonly disabled = input<boolean, BooleanInput>(false, {\n    alias: 'ngpNativeSelectDisabled',\n    transform: booleanAttribute,\n  });\n\n  /**\n   * The select state.\n   */\n  private readonly state = selectNativeSelectState<NgpNativeSelect>(this);\n\n  constructor() {\n    setupInteractions({\n      hover: true,\n      press: true,\n      focus: true,\n      focusVisible: true,\n      disabled: this.state.disabled,\n    });\n    setupFormControl({ id: this.state.id, disabled: this.state.disabled });\n  }\n}\n","import {\n  createState,\n  createStateInjector,\n  createStateProvider,\n  createStateToken,\n} from 'ng-primitives/state';\nimport type { NgpSelect } from './select';\n\n/**\n * The state token  for the Select primitive.\n */\nexport const NgpSelectStateToken = createStateToken<NgpSelect>('Select');\n\n/**\n * Provides the Select state.\n */\nexport const provideSelectState = createStateProvider(NgpSelectStateToken);\n\n/**\n * Injects the Select state.\n */\nexport const injectSelectState = createStateInjector<NgpSelect>(NgpSelectStateToken);\n\n/**\n * The Select state registration function.\n */\nexport const selectState = createState(NgpSelectStateToken);\n","import { Directive, input } from '@angular/core';\nimport { injectElementRef, observeResize } from 'ng-primitives/internal';\nimport { uniqueId } from 'ng-primitives/utils';\nimport { injectSelectState } from '../select/select-state';\n\n@Directive({\n  selector: '[ngpSelectDropdown]',\n  exportAs: 'ngpSelectDropdown',\n  host: {\n    role: 'listbox',\n    '[id]': 'id()',\n    '[style.left.px]': 'state().overlay()?.position()?.x',\n    '[style.top.px]': 'state().overlay()?.position()?.y',\n    '[style.--ngp-select-transform-origin]': 'state().overlay()?.transformOrigin()',\n    '[style.--ngp-select-width.px]': 'selectDimensions().width',\n  },\n})\nexport class NgpSelectDropdown {\n  /** Access the select state. */\n  protected readonly state = injectSelectState();\n\n  /** The dimensions of the select. */\n  protected readonly selectDimensions = observeResize(() => this.state().elementRef.nativeElement);\n\n  /**\n   * Access the element reference.\n   * @internal\n   */\n  readonly elementRef = injectElementRef();\n\n  /** The id of the dropdown. */\n  readonly id = input<string>(uniqueId('ngp-select-dropdown'));\n\n  constructor() {\n    this.state().registerDropdown(this);\n  }\n}\n","import { BooleanInput } from '@angular/cdk/coercion';\nimport {\n  booleanAttribute,\n  computed,\n  Directive,\n  HostListener,\n  input,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { NgpActivatable } from 'ng-primitives/a11y';\nimport { setupInteractions } from 'ng-primitives/interactions';\nimport { injectElementRef } from 'ng-primitives/internal';\nimport { uniqueId } from 'ng-primitives/utils';\nimport { injectSelectState } from '../select/select-state';\n\n@Directive({\n  selector: '[ngpSelectOption]',\n  exportAs: 'ngpSelectOption',\n  host: {\n    role: 'option',\n    '[id]': 'id()',\n    '[attr.tabindex]': '-1',\n    '[attr.aria-selected]': 'selected() ? \"true\" : undefined',\n    '[attr.data-selected]': 'selected() ? \"\" : undefined',\n    '[attr.data-active]': 'active() ? \"\" : undefined',\n    '[attr.data-disabled]': 'disabled() ? \"\" : undefined',\n    '(click)': 'select()',\n  },\n})\nexport class NgpSelectOption implements OnInit, OnDestroy, NgpActivatable {\n  /** Access the select state. */\n  protected readonly state = injectSelectState();\n\n  /**\n   * The element reference of the option.\n   * @internal\n   */\n  readonly elementRef = injectElementRef();\n\n  /** The id of the option. */\n  readonly id = input<string>(uniqueId('ngp-select-option'));\n\n  /** @required The value of the option. */\n  readonly value = input<any>(undefined, {\n    alias: 'ngpSelectOptionValue',\n  });\n\n  /** The disabled state of the option. */\n  readonly disabled = input<boolean, BooleanInput>(false, {\n    alias: 'ngpSelectOptionDisabled',\n    transform: booleanAttribute,\n  });\n\n  /**\n   * Whether this option is the active descendant.\n   * @internal\n   */\n  protected readonly active = computed(\n    () => this.state().activeDescendantManager.activeDescendant() === this.id(),\n  );\n\n  /** Whether this option is selected. */\n  protected readonly selected = computed(() => {\n    const value = this.value();\n\n    if (!value) {\n      return false;\n    }\n\n    if (this.state().multiple()) {\n      return (\n        Array.isArray(value) && value.some(v => this.state().compareWith()(v, this.state().value()))\n      );\n    }\n\n    return this.state().compareWith()(value, this.state().value());\n  });\n\n  constructor() {\n    this.state().registerOption(this);\n\n    setupInteractions({\n      hover: true,\n      press: true,\n      disabled: this.disabled,\n    });\n  }\n\n  ngOnInit(): void {\n    if (this.value() === undefined) {\n      throw new Error(\n        'ngpSelectOption: The value input is required. Please provide a value for the option.',\n      );\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.state().unregisterOption(this);\n  }\n\n  /**\n   * Select the option.\n   * @internal\n   */\n  select(): void {\n    if (this.disabled()) {\n      return;\n    }\n\n    this.state().toggleOption(this);\n  }\n\n  /**\n   * Scroll the option into view.\n   * @internal\n   */\n  scrollIntoView(): void {\n    this.elementRef.nativeElement.scrollIntoView({ block: 'nearest' });\n  }\n\n  /**\n   * Whenever the pointer enters the option, activate it.\n   * @internal\n   */\n  @HostListener('pointerenter')\n  protected onPointerEnter(): void {\n    this.state().activeDescendantManager.activate(this);\n  }\n\n  /**\n   * Whenever the pointer leaves the option, deactivate it.\n   * @internal\n   */\n  @HostListener('pointerleave')\n  protected onPointerLeave(): void {\n    this.state().activeDescendantManager.activate(undefined);\n  }\n}\n","import {\n  Directive,\n  inject,\n  Injector,\n  OnDestroy,\n  signal,\n  TemplateRef,\n  ViewContainerRef,\n} from '@angular/core';\nimport { createOverlay, NgpOverlay, NgpOverlayConfig } from 'ng-primitives/portal';\nimport { injectSelectState } from '../select/select-state';\n\n@Directive({\n  selector: '[ngpSelectPortal]',\n  exportAs: 'ngpSelectPortal',\n})\nexport class NgpSelectPortal implements OnDestroy {\n  /** Access the select state. */\n  private readonly state = injectSelectState();\n  /** Access the view container reference. */\n  private readonly viewContainerRef = inject(ViewContainerRef);\n\n  /** Access the template reference. */\n  private readonly templateRef = inject(TemplateRef);\n\n  /** Access the injector. */\n  private readonly injector = inject(Injector);\n\n  /**\n   * The overlay that manages the popover\n   * @internal\n   */\n  readonly overlay = signal<NgpOverlay<void> | null>(null);\n\n  constructor() {\n    this.state().registerPortal(this);\n  }\n\n  /** Cleanup the portal. */\n  ngOnDestroy(): void {\n    this.overlay()?.destroy();\n  }\n\n  /**\n   * Attach the portal.\n   * @internal\n   */\n  show(): Promise<void> {\n    // Create the overlay if it doesn't exist yet\n    if (!this.overlay()) {\n      this.createOverlay();\n    }\n\n    // Show the overlay\n    return this.overlay()!.show();\n  }\n\n  /**\n   * Detach the portal.\n   * @internal\n   */\n  async detach(): Promise<void> {\n    this.overlay()?.hide();\n  }\n\n  /**\n   * Create the overlay that will contain the dropdown\n   */\n  private createOverlay(): void {\n    // Create config for the overlay\n    const config: NgpOverlayConfig<void> = {\n      content: this.templateRef,\n      viewContainerRef: this.viewContainerRef,\n      triggerElement: this.state().elementRef.nativeElement,\n      injector: this.injector,\n      placement: this.state().placement(),\n      closeOnOutsideClick: true,\n      closeOnEscape: true,\n      restoreFocus: false,\n      scrollBehaviour: 'reposition',\n      container: this.state().container(),\n    };\n\n    this.overlay.set(createOverlay(config));\n  }\n}\n","import { InjectionToken, Provider, inject } from '@angular/core';\nimport type { Placement } from '@floating-ui/dom';\n\nexport interface NgpSelectConfig {\n  /**\n   * The default placement for the select dropdown.\n   * @default 'bottom'\n   */\n  placement: Placement;\n\n  /**\n   * The container element or selector for the select dropdown.\n   * This can be used to control where the dropdown is rendered in the DOM.\n   * @default 'body'\n   */\n  container: HTMLElement | string | null;\n}\n\nexport const defaultSelectConfig: NgpSelectConfig = {\n  placement: 'bottom',\n  container: 'body',\n};\n\nexport const NgpSelectConfigToken = new InjectionToken<NgpSelectConfig>('NgpSelectConfigToken');\n\n/**\n * Provide the default Select configuration\n * @param config The Select configuration\n * @returns The provider\n */\nexport function provideSelectConfig(config: Partial<NgpSelectConfig>): Provider[] {\n  return [\n    {\n      provide: NgpSelectConfigToken,\n      useValue: { ...defaultSelectConfig, ...config },\n    },\n  ];\n}\n\n/**\n * Inject the Select configuration\n * @returns The global Select configuration\n */\nexport function injectSelectConfig(): NgpSelectConfig {\n  return inject(NgpSelectConfigToken, { optional: true }) ?? defaultSelectConfig;\n}\n","import { BooleanInput } from '@angular/cdk/coercion';\nimport {\n  afterRenderEffect,\n  booleanAttribute,\n  computed,\n  Directive,\n  HostListener,\n  inject,\n  Injector,\n  input,\n  output,\n  signal,\n} from '@angular/core';\nimport type { Placement } from '@floating-ui/dom';\nimport { activeDescendantManager } from 'ng-primitives/a11y';\nimport { setupFormControl } from 'ng-primitives/form-field';\nimport { setupInteractions } from 'ng-primitives/interactions';\nimport { injectElementRef } from 'ng-primitives/internal';\nimport { uniqueId } from 'ng-primitives/utils';\nimport { injectSelectConfig } from '../config/select-config';\nimport type { NgpSelectDropdown } from '../select-dropdown/select-dropdown';\nimport { NgpSelectOption } from '../select-option/select-option';\nimport type { NgpSelectPortal } from '../select-portal/select-portal';\nimport { provideSelectState, selectState } from './select-state';\n\n/**\n * Ideally we would use a generic type here, unfortunately, unlike in React,\n * we cannot infer the type based on another input. For example, if multiple\n * is true, we cannot infer that the value is an array of T. Using a union\n * type is not ideal either because it requires the user to handle multiple cases.\n * Using a generic also isn't ideal because we need to use T as both an array and\n * a single value.\n *\n * Any seems to be used by Angular Material, ng-select, and other libraries\n * so we will use it here as well.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype T = any;\n\n@Directive({\n  selector: '[ngpSelect]',\n  exportAs: 'ngpSelect',\n  providers: [provideSelectState()],\n  host: {\n    role: 'combobox',\n    '[id]': 'state.id()',\n    '[attr.aria-expanded]': 'state.open()',\n    '[attr.aria-controls]': 'state.open() ? state.dropdown()?.id() : undefined',\n    '[attr.aria-activedescendant]':\n      'state.open() ? activeDescendantManager.activeDescendant() : undefined',\n    '[attr.tabindex]': 'state.disabled() ? -1 : 0',\n    '[attr.data-open]': 'state.open() ? \"\" : undefined',\n    '[attr.data-disabled]': 'state.disabled() ? \"\" : undefined',\n    '[attr.data-multiple]': 'state.multiple() ? \"\" : undefined',\n  },\n})\nexport class NgpSelect {\n  /** Access the select configuration. */\n  protected readonly config = injectSelectConfig();\n\n  /** @internal Access the select element. */\n  readonly elementRef = injectElementRef();\n\n  /** Access the injector. */\n  protected readonly injector = inject(Injector);\n\n  /** The unique id of the select. */\n  readonly id = input(uniqueId('ngp-select'));\n\n  /** The value of the select. */\n  readonly value = input<T>(undefined, {\n    alias: 'ngpSelectValue',\n  });\n\n  /** Event emitted when the value changes. */\n  readonly valueChange = output<T>({\n    alias: 'ngpSelectValueChange',\n  });\n\n  /** Whether the select is multiple selection. */\n  readonly multiple = input<boolean, BooleanInput>(false, {\n    alias: 'ngpSelectMultiple',\n    transform: booleanAttribute,\n  });\n\n  /** Whether the select is disabled. */\n  readonly disabled = input<boolean, BooleanInput>(false, {\n    alias: 'ngpSelectDisabled',\n    transform: booleanAttribute,\n  });\n\n  /** Emit when the dropdown open state changes. */\n  readonly openChange = output<boolean>({\n    alias: 'ngpSelectOpenChange',\n  });\n\n  /** The comparator function used to compare options. */\n  readonly compareWith = input<(a: T | undefined, b: T | undefined) => boolean>(Object.is, {\n    alias: 'ngpSelectCompareWith',\n  });\n\n  /** The position of the dropdown. */\n  readonly placement = input<Placement>(this.config.placement, {\n    alias: 'ngpSelectDropdownPlacement',\n  });\n\n  /** The container for the dropdown. */\n  readonly container = input<HTMLElement | string | null>(this.config.container, {\n    alias: 'ngpSelectDropdownContainer',\n  });\n\n  /**\n   * Store the select portal.\n   * @internal\n   */\n  readonly portal = signal<NgpSelectPortal | undefined>(undefined);\n\n  /**\n   * Store the select dropdown.\n   * @internal\n   */\n  readonly dropdown = signal<NgpSelectDropdown | undefined>(undefined);\n\n  /**\n   * Store the select options.\n   * @internal\n   */\n  readonly options = signal<NgpSelectOption[]>([]);\n\n  /**\n   * Access the overlay\n   * @internal\n   */\n  readonly overlay = computed(() => this.portal()?.overlay());\n\n  /**\n   * The open state of the select.\n   * @internal\n   */\n  readonly open = computed(() => this.overlay()?.isOpen() ?? false);\n\n  /**\n   * The active key descendant manager.\n   * @internal\n   */\n  readonly activeDescendantManager = activeDescendantManager({\n    // we must wrap the signal in a computed to ensure it is not used before it is defined\n    disabled: computed(() => this.state.disabled()),\n    items: this.options,\n  });\n\n  /** The state of the select. */\n  protected readonly state = selectState<NgpSelect>(this);\n\n  constructor() {\n    setupInteractions({\n      focus: true,\n      focusWithin: true,\n      hover: true,\n      press: true,\n      disabled: this.state.disabled,\n    });\n\n    setupFormControl({ id: this.state.id, disabled: this.state.disabled });\n\n    // any time the active descendant changes, ensure we scroll it into view\n    // perform after next render to ensure the DOM is updated\n    // e.g. the dropdown is open before the option is scrolled into view\n    afterRenderEffect({\n      write: () => {\n        const isPositioned = this.portal()?.overlay()?.isPositioned() ?? false;\n        const activeItem = this.activeDescendantManager.activeItem();\n\n        if (!isPositioned || !activeItem) {\n          return;\n        }\n\n        this.activeDescendantManager.activeItem()?.scrollIntoView?.();\n      },\n    });\n  }\n\n  /**\n   * Open the dropdown.\n   * @internal\n   */\n  async openDropdown(): Promise<void> {\n    if (this.state.disabled() || this.open()) {\n      return;\n    }\n\n    this.openChange.emit(true);\n    await this.portal()?.show();\n\n    // if there is a selected option(s), set the active descendant to the first selected option\n    const selectedOption = this.options().find(option => this.isOptionSelected(option));\n\n    // if there is no selected option, set the active descendant to the first option\n    const targetOption = selectedOption ?? this.options()[0];\n\n    // if there is no target option, do nothing\n    if (!targetOption) {\n      return;\n    }\n\n    // activate the selected option or the first option\n    this.activeDescendantManager.activate(targetOption);\n  }\n\n  /**\n   * Close the dropdown.\n   * @internal\n   */\n  closeDropdown(): void {\n    if (!this.open()) {\n      return;\n    }\n\n    this.openChange.emit(false);\n    this.portal()?.detach();\n\n    // clear the active descendant\n    this.activeDescendantManager.reset();\n  }\n\n  /**\n   * Toggle the dropdown.\n   * @internal\n   */\n  @HostListener('click')\n  async toggleDropdown(): Promise<void> {\n    if (this.open()) {\n      this.closeDropdown();\n    } else {\n      await this.openDropdown();\n    }\n  }\n\n  /**\n   * Select an option.\n   * @param option The option to select.\n   * @internal\n   */\n  selectOption(option: NgpSelectOption | undefined): void {\n    if (this.state.disabled()) {\n      return;\n    }\n\n    if (!option) {\n      this.state.value.set(undefined);\n      this.closeDropdown();\n      return;\n    }\n\n    if (this.state.multiple()) {\n      // if the option is already selected, do nothing\n      if (this.isOptionSelected(option)) {\n        return;\n      }\n\n      const value = [...((this.state.value() ?? []) as T[]), option.value() as T];\n\n      // add the option to the value\n      this.state.value.set(value as T);\n      this.valueChange.emit(value as T);\n    } else {\n      this.state.value.set(option.value() as T);\n      this.valueChange.emit(option.value() as T);\n\n      // close the dropdown on single selection\n      this.closeDropdown();\n    }\n  }\n\n  /**\n   * Deselect an option.\n   * @param option The option to deselect.\n   * @internal\n   */\n  deselectOption(option: NgpSelectOption): void {\n    // if the select is disabled or the option is not selected, do nothing\n    // if the select is single selection, we don't allow deselecting\n    if (this.state.disabled() || !this.isOptionSelected(option) || !this.state.multiple()) {\n      return;\n    }\n\n    const values = (this.state.value() as T[]) ?? [];\n\n    const newValue = values.filter(v => !this.state.compareWith()(v, option.value() as T));\n\n    // remove the option from the value\n    this.state.value.set(newValue as T);\n    this.valueChange.emit(newValue as T);\n  }\n\n  /**\n   * Toggle the selection of an option.\n   * @param option The option to toggle.\n   * @internal\n   */\n  toggleOption(option: NgpSelectOption): void {\n    if (this.state.disabled()) {\n      return;\n    }\n\n    // if the state is single selection, we don't allow toggling\n    if (!this.state.multiple()) {\n      // always select the option in single selection mode even if it is already selected so that we update the input\n      this.selectOption(option);\n      return;\n    }\n\n    // otherwise toggle the option\n    if (this.isOptionSelected(option)) {\n      this.deselectOption(option);\n    } else {\n      this.selectOption(option);\n    }\n  }\n\n  /**\n   * Determine if an option is selected.\n   * @param option The option to check.\n   * @internal\n   */\n  isOptionSelected(option: NgpSelectOption): boolean {\n    if (this.state.disabled()) {\n      return false;\n    }\n\n    const value = this.state.value();\n\n    if (!value) {\n      return false;\n    }\n\n    if (this.state.multiple()) {\n      return value && (value as T[]).some(v => this.state.compareWith()(option.value(), v));\n    }\n\n    return this.state.compareWith()(option.value(), value);\n  }\n\n  /**\n   * Activate the next option in the list if there is one.\n   * If there is no option currently active, activate the selected option or the first option.\n   * @internal\n   */\n  activateNextOption(): void {\n    if (this.state.disabled()) {\n      return;\n    }\n\n    const options = this.options();\n\n    // if there are no options, do nothing\n    if (options.length === 0) {\n      return;\n    }\n\n    // if there is no active option, activate the first option\n    if (!this.activeDescendantManager.activeItem()) {\n      const selectedOption = options.find(option => this.isOptionSelected(option));\n\n      // if there is a selected option(s), set the active descendant to the first selected option\n      const targetOption = selectedOption ?? options[0];\n\n      this.activeDescendantManager.activate(targetOption);\n      return;\n    }\n\n    // otherwise activate the next option\n    this.activeDescendantManager.next();\n  }\n\n  /**\n   * Activate the previous option in the list if there is one.\n   * @internal\n   */\n  activatePreviousOption(): void {\n    if (this.state.disabled()) {\n      return;\n    }\n    const options = this.options();\n    // if there are no options, do nothing\n    if (options.length === 0) {\n      return;\n    }\n    // if there is no active option, activate the last option\n    if (!this.activeDescendantManager.activeItem()) {\n      const selectedOption = options.find(option => this.isOptionSelected(option));\n      // if there is a selected option(s), set the active descendant to the first selected option\n      const targetOption = selectedOption ?? options[options.length - 1];\n      this.activeDescendantManager.activate(targetOption);\n      return;\n    }\n    // otherwise activate the previous option\n    this.activeDescendantManager.previous();\n  }\n\n  /**\n   * Register the dropdown portal with the select.\n   * @param portal The dropdown portal.\n   * @internal\n   */\n  registerPortal(portal: NgpSelectPortal): void {\n    this.portal.set(portal);\n  }\n\n  /**\n   * Register the dropdown with the select.\n   * @param dropdown The dropdown to register.\n   * @internal\n   */\n  registerDropdown(dropdown: NgpSelectDropdown): void {\n    this.dropdown.set(dropdown);\n  }\n\n  /**\n   * Register an option with the select.\n   * @param option The option to register.\n   * @internal\n   */\n  registerOption(option: NgpSelectOption): void {\n    this.options.update(options => [...options, option]);\n  }\n\n  /**\n   * Unregister an option from the select.\n   * @param option The option to unregister.\n   * @internal\n   */\n  unregisterOption(option: NgpSelectOption): void {\n    this.options.update(options => options.filter(o => o !== option));\n  }\n\n  /**\n   * Focus the select.\n   * @internal\n   */\n  focus(): void {\n    this.elementRef.nativeElement.focus();\n  }\n\n  /** Handle keydown events for accessibility. */\n  @HostListener('keydown', ['$event'])\n  protected handleKeydown(event: KeyboardEvent): void {\n    switch (event.key) {\n      case 'ArrowDown':\n        if (this.open()) {\n          this.activateNextOption();\n        } else {\n          this.openDropdown();\n        }\n        event.preventDefault();\n        break;\n      case 'ArrowUp':\n        if (this.open()) {\n          this.activatePreviousOption();\n        } else {\n          this.openDropdown();\n          this.activeDescendantManager.last();\n        }\n        event.preventDefault();\n        break;\n      case 'Home':\n        if (this.open()) {\n          this.activeDescendantManager.first();\n        }\n        event.preventDefault();\n        break;\n      case 'End':\n        if (this.open()) {\n          this.activeDescendantManager.last();\n        }\n        event.preventDefault();\n        break;\n      case 'Enter':\n        if (this.open()) {\n          this.selectOption(this.activeDescendantManager.activeItem());\n        } else {\n          this.openDropdown();\n        }\n        event.preventDefault();\n        break;\n      case ' ':\n        this.toggleDropdown();\n        event.preventDefault();\n        break;\n    }\n  }\n\n  @HostListener('blur', ['$event'])\n  protected onBlur(event: FocusEvent): void {\n    const relatedTarget = event.relatedTarget as HTMLElement;\n\n    // if the blur was caused by focus moving to the dropdown, don't close\n    if (relatedTarget && this.dropdown()?.elementRef.nativeElement.contains(relatedTarget)) {\n      return;\n    }\n\n    this.closeDropdown();\n    event.preventDefault();\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}